$def with (game, past = [], error = None)

$var css: <link rel="stylesheet" href="/static/css/guess-form.css">

$if game["won"] in [0,1]:
    $var link1: <a class="item" href="/setup"><i class="game icon"></i> Back to Levels</a>

$var link2: <a class="item" href="/restart"><i class="refresh icon"></i> Restart Game</a>

$if not game["won"] in [0,1]:
    $var link3: <a class="item" href="/quit"><i class="power icon"></i> Quit Game</a>

$var logout: True

$ goldCoins = game["goldCoins"]
$ silverCoins = game["silverCoins"]
$ length = int(game["digits"])
$ complexity = int(game["complexity"])
$ _round = len(past) + 1
$ password = game["password"]

$if complexity == 0:
    $ inputType = "only numbers"
    $ inputSet = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']
    $ keyboardType = "tel"
$elif complexity == 1:
    $ inputType = "only letters"
    $ inputSet = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'r', 's', 't', 'u', 'v', 'y', 'z', 'x', 'q', 'w']
    $ keyboardType = "text"
$elif complexity == 2:
    $ inputType = "both numbers and letters"
    $ inputSet = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'r', 's', 't', 'u', 'v', 'y', 'z', 'x', 'q', 'w']
    $ keyboardType = "text"
$elif complexity == 3:
    $ inputType = "both numbers and lower- and upper-case letters"
    $ inputSet = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'r', 's', 't', 'u', 'v', 'y', 'z', 'x', 'q', 'w', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']
    $ keyboardType = "text"


$if len(past) == 0:
    $ goldInBag = goldCoins
    $ silverInBag = silverCoins
$else:
    $ goldInBag = past[0][4]
    $ silverInBag = past[0][5]

$if error:
    <div class="ui red message"><i class="remove sign icon"></i> $error</div>


$if game["won"] in [0, 1]:
    <div class="boxes">
    $ m = '*******\n*     *\n*     *\n*     *\n*     *\n*******'
    $for i in range(length):
        <div class="box"><pre data-pass="$password[i]">$m</pre></div>
    </div>
$else:
    <h2 class="ui header center aligned">Make your guess:</h2>
    <form class="guess" name="main" method="POST">
        <div class="boxes">
        $ m = '*******\n*     *\n*     *\n*     *\n*     *\n*******'
        $ names = ["first", "second", "third", "fourth", "fifth", "sixth", "seventh", "eighth"]
        $for i in range(length):
            <div class="box">
                <input type="$keyboardType" name="$names[i]" maxlength=1 size=1 placeholder="*" autocomplete="off" autocapitalize="none"/>
                <pre class="azicik-asagida-olsun" data-pass="">$m</pre>
            </div>
        </div>
        <div class="submit-field">
            <button type="submit" class="ui primary button"> Go! </button>
        </div>
    </form>
$if game["won"] == 1:
    $ goldInBag = goldInBag
    <h2 class="ui header center aligned">You won this game already!</h2>
$elif game["won"] == 0:
    $ goldInBag = 0
    $ silverInBag = 0
    <h2 class="ui header center aligned">You lost this game already!</h2>
<div class="ui divider"></div>
<div class="login-page ui two column very relaxed stackable grid">
    <div class="column">
        <h3 class="ui header">Past Guesses</h3>
        <table class="ui celled table center aligned unstackable">
            <thead>
                <tr>
                    <th>Round</th>
                    <th>Guess</th>
                    <th>Gold Coins</th>
                    <th>Silver Coins</th>
                </tr>
            </thead>
            <tbody>
                $if len(past) > 0:
                    $for row in past:
                        $ gold = '-'
                        $ silver = '-'
                        $if row[2] != length:
                            $ gold = row[2]
                        $if row[2] != length:
                            $ silver = row[3]
                        <tr>
                            <td>$row[0]</td>
                            <td><code>$row[1]</code></td>
                            <td><div class="ui yellow circular label">$gold</div></td>
                            <td><div class="ui grey circular label">$silver</div></td>
                        </tr>
                $else:
                        <tr>
                            <td colspan="4">Your guesses with their results will appear here.</td>
                        </tr>
            </tbody>
        </table>
    </div>
    <div class="column">
        $if game["won"] == 1:
            $ goldInBag = goldInBag + past[-1][2]
        $elif game["won"] == 0:
            $ goldInBag = 0
            $ silverInBag = 0
        <div class="coin-bags">
            <div class="coin-bag gold">
                <svg enable-background="new 0 0 24 24" id="Layer_1" version="1.0" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M11.2,4.3c0.3,0.4,0.7,0.6,1.1,0.8C12.1,5.6,12,6,11.9,6.4c-0.1,0-0.3,0-0.4,0l-0.1,0c-0.3,0-0.7-0.1-1-0.1   c-0.1-0.2-0.3-0.5-0.4-0.7C10,5.5,9.9,5.4,9.9,5.4C10.3,5.2,10.8,4.8,11.2,4.3 M11.2,2C11.2,2,11.2,2,11.2,2c-0.5,0-1,0.1-1.5,0.9   c-0.4,0.7-1,0.7-1.9,0.7c-0.8,0-1,0.6-0.6,1.2c0.2,0.3,1.5,2.5,1.8,3c0.3,0.4,1.5,0.7,2.4,0.7c0.1,0,0.1,0,0.2,0   c0.9,0,2.3-0.4,2.2-1.1c-0.1-1.3,1.2-3,1.4-3.2c0.3-0.4,0.2-1.3-0.6-1.3c-0.2,0-0.4,0-0.6,0.1c-0.2,0.1-0.5,0.2-0.8,0.2   c-0.2,0-0.4-0.1-0.5-0.3C12.1,2.1,11.6,2,11.2,2L11.2,2z"/></g><g><path d="M9,7.8c0.3,0.5,1.7,0.7,2.6,0.7c0.9,0,2.3-0.4,2.2-1.1c-0.1-1.3,1.2-3,1.4-3.2c-0.4,0.2-0.7,0.5-1.1,0.4   C13.9,4.8,13.4,6,12.4,6c-0.7,0-0.8-1-1.3-1c-0.5,0-0.6,0.7-1,0.8C9.2,6,8.5,5.1,8,4.5c-0.2,0-0.6-0.3-0.8,0.4   C7.4,5.1,8.7,7.3,9,7.8z"/></g><path d="M13.6,8.8c-0.7,0.3-1.5,0.5-2,0.5l-0.2,0c-0.2,0-1.1,0-1.9-0.3C5.2,10.3,2,14.7,2,17.8C2,21.5,6.5,22,12,22s10-0.5,10-4.2  C22,14.5,18.4,9.8,13.6,8.8z M11.6,14.5c0.1,0.1,0.3,0.3,0.6,0.5c0.6,0.2,1.1,0.5,1.4,0.8c0.3,0.3,0.5,0.8,0.5,1.4  c0,0.5-0.2,1-0.5,1.3c-0.3,0.3-0.7,0.5-1.2,0.6V20h-0.7v-0.9c-0.5-0.1-1-0.3-1.3-0.6c-0.3-0.3-0.5-0.9-0.5-1.5l0,0h1.3  c0,0.4,0.1,0.7,0.2,0.9s0.4,0.3,0.6,0.3c0.2,0,0.4-0.1,0.5-0.2c0.1-0.2,0.2-0.4,0.2-0.6c0-0.3-0.1-0.5-0.2-0.6  c-0.1-0.2-0.3-0.3-0.6-0.5c-0.6-0.2-1.1-0.5-1.4-0.8s-0.5-0.8-0.5-1.3c0-0.5,0.2-1,0.5-1.3c0.3-0.3,0.7-0.5,1.2-0.6v-1h0.7v1  c0.5,0.1,0.9,0.3,1.2,0.7s0.4,0.8,0.4,1.4h-1.3c0-0.3-0.1-0.6-0.2-0.8c-0.1-0.2-0.3-0.3-0.5-0.3c-0.2,0-0.4,0.1-0.5,0.2  c-0.1,0.2-0.1,0.4-0.1,0.6C11.5,14.2,11.5,14.4,11.6,14.5z"/></svg>
                <span>$goldInBag</span>
            </div>
            <div class="coin-bag silver">
                <svg enable-background="new 0 0 24 24" id="Layer_1" version="1.0" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M11.2,4.3c0.3,0.4,0.7,0.6,1.1,0.8C12.1,5.6,12,6,11.9,6.4c-0.1,0-0.3,0-0.4,0l-0.1,0c-0.3,0-0.7-0.1-1-0.1   c-0.1-0.2-0.3-0.5-0.4-0.7C10,5.5,9.9,5.4,9.9,5.4C10.3,5.2,10.8,4.8,11.2,4.3 M11.2,2C11.2,2,11.2,2,11.2,2c-0.5,0-1,0.1-1.5,0.9   c-0.4,0.7-1,0.7-1.9,0.7c-0.8,0-1,0.6-0.6,1.2c0.2,0.3,1.5,2.5,1.8,3c0.3,0.4,1.5,0.7,2.4,0.7c0.1,0,0.1,0,0.2,0   c0.9,0,2.3-0.4,2.2-1.1c-0.1-1.3,1.2-3,1.4-3.2c0.3-0.4,0.2-1.3-0.6-1.3c-0.2,0-0.4,0-0.6,0.1c-0.2,0.1-0.5,0.2-0.8,0.2   c-0.2,0-0.4-0.1-0.5-0.3C12.1,2.1,11.6,2,11.2,2L11.2,2z"/></g><g><path d="M9,7.8c0.3,0.5,1.7,0.7,2.6,0.7c0.9,0,2.3-0.4,2.2-1.1c-0.1-1.3,1.2-3,1.4-3.2c-0.4,0.2-0.7,0.5-1.1,0.4   C13.9,4.8,13.4,6,12.4,6c-0.7,0-0.8-1-1.3-1c-0.5,0-0.6,0.7-1,0.8C9.2,6,8.5,5.1,8,4.5c-0.2,0-0.6-0.3-0.8,0.4   C7.4,5.1,8.7,7.3,9,7.8z"/></g><path d="M13.6,8.8c-0.7,0.3-1.5,0.5-2,0.5l-0.2,0c-0.2,0-1.1,0-1.9-0.3C5.2,10.3,2,14.7,2,17.8C2,21.5,6.5,22,12,22s10-0.5,10-4.2  C22,14.5,18.4,9.8,13.6,8.8z M11.6,14.5c0.1,0.1,0.3,0.3,0.6,0.5c0.6,0.2,1.1,0.5,1.4,0.8c0.3,0.3,0.5,0.8,0.5,1.4  c0,0.5-0.2,1-0.5,1.3c-0.3,0.3-0.7,0.5-1.2,0.6V20h-0.7v-0.9c-0.5-0.1-1-0.3-1.3-0.6c-0.3-0.3-0.5-0.9-0.5-1.5l0,0h1.3  c0,0.4,0.1,0.7,0.2,0.9s0.4,0.3,0.6,0.3c0.2,0,0.4-0.1,0.5-0.2c0.1-0.2,0.2-0.4,0.2-0.6c0-0.3-0.1-0.5-0.2-0.6  c-0.1-0.2-0.3-0.3-0.6-0.5c-0.6-0.2-1.1-0.5-1.4-0.8s-0.5-0.8-0.5-1.3c0-0.5,0.2-1,0.5-1.3c0.3-0.3,0.7-0.5,1.2-0.6v-1h0.7v1  c0.5,0.1,0.9,0.3,1.2,0.7s0.4,0.8,0.4,1.4h-1.3c0-0.3-0.1-0.6-0.2-0.8c-0.1-0.2-0.3-0.3-0.5-0.3c-0.2,0-0.4,0.1-0.5,0.2  c-0.1,0.2-0.1,0.4-0.1,0.6C11.5,14.2,11.5,14.4,11.6,14.5z"/></svg>
                <span>$silverInBag</span>
            </div>
        </div>
        <div class="ui two column center aligned grid">
            <div class="column"><h4 class="ui header">Your Gold Coins</h4></div>
            <div class="column"><h4 class="ui header">Your Silver Coins</h4></div>
        </div>
        <div class="ui segment center aligned">
            <h4 class="ui header">Possible characters:</h4>
            <div class="ui circular labels">
                $for input in inputSet:
                    <div class="ui gray circular label">$input</div>
            </div>
        </div>
    </div>
</div>
<script>
  window.inputSet = $:inputSet;
</script>
<script type="text/javascript" src="/static/js/input-ux.js"></script>